<?php/*Загружаем миниатюру*/add_action( 'added_post_meta', 'add_featured_image', 10, 4 );add_action( 'updated_post_meta', 'add_featured_image', 10, 4 );function add_featured_image( $meta_id, $post_id, $meta_key, $meta_value ){//Если не та мета, то возвратif ( 'logo' != $meta_key ) return;media_sideload_image( $meta_value, $post_id );cp_set_featured_image($post_id); }function cp_set_featured_image($post_id) {				if ( has_post_thumbnail( $post_id ) )			return NULL;				$args = array(			'numberposts'    => 1,			'order'          => 'ASC', // DESC for the last image			'post_mime_type' => 'image',			'post_parent'    => $post_id,			'post_status'    => NULL,			'post_type'      => 'attachment'		);				$attached_image = get_children( $args );		if ( $attached_image ) {			foreach ( $attached_image as $attachment_id => $attachment )				set_post_thumbnail( $post_id, $attachment_id );		}		}/*Метки*/add_action( 'added_post_meta', 'cp_add_tags', 10, 4 );add_action( 'updated_post_meta', 'cp_add_tags', 10, 4 );function cp_add_tags( $meta_id, $post_id, $meta_key, $meta_value ){//Если не та мета, то возвратif ( 'categories' != $meta_key ) return;wp_set_post_tags( $post_id, $meta_value, true );}?>